var setErr,main={},YTPlayer={},YT=YT||null,ga=ga||null,isMobile=!1,isTablet=!1;function debounce(t,i=300){let s;return(...e)=>{clearTimeout(s),s=setTimeout(()=>{t.apply(this,e)},i)}}window.dataLayer=window.dataLayer||[],Element.NativeEvents.popstate=2,Element.NativeEvents.canplay=2,Element.NativeEvents.transitionend=2,Element.NativeEvents.transitionstart=2,Element.NativeEvents.touchstart=2,Element.NativeEvents.touchend=2,Element.NativeEvents.touchcancel=2,Element.NativeEvents.message=2,!(JSON.secure=!0)in Array.prototype&&(Array.prototype.find=function(e){for(var t=0;t<this.length;t++)if(e(this[t]))return this[t]},Array.prototype.findIndex=function(e){for(var t=0;t<this.length;t++)if(e(this[t]))return t});var onPlayerReady=function(e){},onPlayerStateChange=function(e){switch(e.data){case YT.PlayerState.PLAYING:e.target.setPlaybackQuality("hd720");break;case YT.PlayerState.PAUSED:case YT.PlayerState.ENDED:}},onPlayerStateChange2=function(e){var t;-1==e.data&&(t=YTPlaylist.getPlaylistIndex(),YTPlaylistGallery.getIndex()!=t)&&(t=YTPlaylistGallery.setIndex(t),YTPlaylistGallery.changeMini(t))},bgVideoChangeState=function(e){switch(e.data){case YT.PlayerState.PLAYING:e.target.setPlaybackQuality("hd720");break;case YT.PlayerState.PAUSED:$("playMainVideo").fireEvent("click");break;case YT.PlayerState.ENDED:YTPlayer.bgVideo.seekTo(0)}},startYTMovie=function(e,t){if(!YT)return startYTMovie.delay(300,this,[e,t]);var i={origin:innerData.def.domain,autohide:1,controls:1,modestbranding:1,enablejsapi:1,rel:0,showinfo:0,theme:"dark",autoplay:1,html5:1,vid:e.getProperty("data-vid"),w:e.getSize().x,h:(e.getSize().x/1.7778).round(),name:String.uniqueID(),mute:!1,events:{onStateChange:onPlayerStateChange,onReady:onPlayerReady}};(i=t?Object.merge(i,t):i).subC&&(e=new Element("div").inject(e)),YTPlayer[i.name]=new YT.Player(e,{height:i.h,width:i.w,videoId:i.vid,wmode:"opaque",playerVars:i,events:i.events})},onYouTubeIframeAPIReady=function(){document.getElements(".ytAutoStart").each(function(e){"a"==e.get("tag")&&e.addEvent("click",function(e){e.stop()});var t=(t=$(e.getProperty("data-container")))?t.getFirst():e,i={autoplay:e.getProperty("data-autoplay")||1,vid:e.getProperty("data-vid"),w:"100%",h:"100%",name:e.getProperty("data-name")||String.uniqueID()},s=e.getProperty("data-evStateChange"),s=(s&&window[s]&&(i.events={onStateChange:window[s]}),e.getProperty("data-evReady"));s&&window[s]&&(i.events||(i.events={}),i.events.onReady=window[s]),startYTMovie(t,i)}),document.querySelectorAll("[data-background-video-id]").forEach(s=>{let e=e=>{var t=s.getBoundingClientRect(),i=16/9;i<=t.width/t.height?e.setSize(t.width,t.width/i):e.setSize(t.height*i,t.height)},t=new YT.Player(s.querySelector("[data-player]"),{videoId:s.dataset.backgroundVideoId,playerVars:{autoplay:1,controls:0,loop:1,playsinline:1,enablejsapi:1,origin:innerData.def.domain,rel:0,showinfo:0,modestbranding:0},events:{onReady:e=>{e.target.mute(),e.target.setPlaybackQuality("hd720"),e.target.playVideo()},onStateChange:e=>{switch(e.data){case YT.PlayerState.PLAYING:e.target.setPlaybackQuality("hd720");break;case YT.PlayerState.ENDED:e.target.seekTo(0)}}}});e(t),window.addEventListener("resize",()=>{e(t)})})},getOdoDiff=function(e){var t=moment().utc(),t=(moment.utc(e.target).diff(t)+e.offset.toInt())/1e3,i=0,s=0,o=0;return 60<t&&(t-=60*(i=(t/60).floor()))<10&&(t="0"+t),60<i&&(i-=60*(s=(i/60).floor()))<10&&(i="0"+i),24<s&&(s-=24*(o=(s/24).floor()))<10&&(s="0"+s),o+""+s+i+t},Layer=new Class({Implements:[Options],options:{bgColor:null,op:.8,clickToClose:!1,time:null,transition:null,zindex:null,onOpen:function(){},onClose:function(){}},initialize:function(e,t){this.setOptions(t);var i=this,s=this.options,s=(this.layerShown=!1,this.layer=new Element("div.dimLayer"),s.bgColor&&this.layer.setStyle("background-color",s.bgColor),s.time&&this.layer.setStyle("transition-duration",s.time),s.transition&&this.layer.setStyle("transition-timing-function",s.transition),s.zindex&&this.layer.setStyle("z-index",s.zindex),this.options.clickToClose&&this.layer.addEvent("click",function(){i.hideLayer()}),document.getElement("body"));s.setStyle("width","100%"),this.layer.inject((e=e||s).setStyle("position","relative")),window.addEvent("keyup",function(e){"esc"==e.key&&i.hideLayer()})},showLayer:function(){this.layerShown||(this.layer.addClass("on").setStyle("opacity",this.options.op),this.layerShown=!0,document.getElement("body").addClass("layerOpen"),this.options.onOpen())},hideLayer:function(){this.layerShown&&(this.layer.removeClass("on").setStyle("opacity",0),this.layerShown=!1,document.getElement("body").removeClass("layerOpen"),this.options.onClose())},getStatus:function(){return this.layerShown}}),popUp=new Class({Implements:[Options],options:{parent:!1,close:"root",closeType:{name:"svgClose",box:"24 24"},addClasses:"",escToHide:!0,clickToHide:!1,showBtns:!1,cleaner:!0,btns:{ok:innerData.def.ok,cancel:innerData.def.cancel,submit:innerData.def.submit},onOk:function(){return!0},onCancel:function(){},onStart:function(){},onEnd:function(){},onShow:function(){},onHide:function(){},onOpen:function(){},onClose:function(){}},initialize:function(e){this.setOptions(e),this.shown=this.el=!1,this.options.parent||(this.options.parent=document.getElement("body")),this.preparePop()},preparePop:function(){var t=this;this.popUp={},this.popUp.root=new Element("div.popUp"+this.options.addClasses).addEvents({transitionstart:function(e){e.target==t.popUp&&t.options.onStart(t.el,t.popUp,t)},transitionend:function(e){e.target==t.popUp.root&&(t.options.onEnd(t.el,t.popUp,t),0==this.getStyle("opacity")?t.options.onHide(t.el,t.popUp,t):t.options.onShow(t.el,t.popUp,t))}}),this.popUp.inner=new Element("div.inner").inject(this.popUp.root),this.closeBtn=new Element("span.close").set("html",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 '+this.options.closeType.box+'"><title>'+innerData.def.close+'</title><use xlink:href="#'+this.options.closeType.name+'" id="svgClosePopUp"></use></svg>').addEvent("click",function(){t.options.onCancel(t.el,t.popUp,t),t.hide()}),"root"==this.options.close&&this.closeBtn.inject(this.popUp.root),this.popUp.root.inject(this.options.parent),this.options.escToHide&&window.addEvent("keyup",function(e){"esc"==e.key&&t.hide()}),this.options.clickToHide&&this.popUp.root.addEvent("click",function(e){e.target==t.popUp.root&&t.hide()}),this.popUp.inner.addEvents({'click:relay(button[name="ok"])':function(){t.options.onOk(t.el,t.popUp,t)&&t.hide()},'click:relay(button[name="cancel"])':function(){t.options.onCancel(t.el,t.popUp,t),t.hide()}})},setEl:function(e){this.el=e},getPop:function(){return this.popUp},setInner:function(t){switch(this.options.cleaner&&this.popUp.inner.empty(),typeOf(t)){case"string":this.popUp.inner.set("html",t);break;case"object":case"element":try{this.popUp.inner.grab(t)}catch(e){this.popUp.inner.appendChild(t)}}this.setBtns(),"inner"==this.options.close&&this.closeBtn.inject(this.popUp.inner)},setBtns:function(){if(this.options.showBtns){var e="";switch(this.options.showBtns){case"confirm":e=(e+='<button name="cancel">'+this.options.btns.cancel+"</button>")+('<button name="ok" class="gold goldborder upper">'+this.options.btns.ok+"</button>");break;case"form":e=(e+='<button type="button" name="cancel">'+this.options.btns.cancel+"</button>")+('<button type="submit" name="ok" class="gold goldborder upper">'+this.options.btns.submit+"</button>");break;case"alert":e+='<button name="ok" class="gold goldborder upper moviemask">'+this.options.btns.ok+"</button>";break;default:return}new Element("div.popUpBtns").set("html",e).inject(this.popUp.inner)}},show:function(){this.shown=!0,this.popUp.root.addClass("open"),this.options.onOpen(this)},hide:function(e){if(e)return this.hide.delay(e,this);this.shown=!1,this.popUp.root.removeClass("open"),this.options.onClose(this)},isOpen:function(){return this.shown},setSize:function(e,t){var i={x:"auto",y:"auto"};e&&(i.x=e),t&&(i.y=t),this.popup.setStyles({width:i.x,height:i.y})},getCenter:function(){var e=this.options.body.getSize(),t=this.options.body.getScroll().y,i=this.popup.getSize(),s={};return s.x=e.x/2-i.x/2,s.y=e.y/2+t-i.y/2,s.y+i.y>t+e.y&&(s.y=t+e.y-i.y),s.y<15&&(s.y=15),s},setCenter:function(){var e=this.getCenter();return this.popup.setStyles({top:e.y,left:e.x}),e},destroy:function(){this.popUp.root.destroy()}});Element.implement({fadeDelayed:function(e,t,i){return this.startFadeDelayed.delay(t,this,[e,i])},startFadeDelayed:function(e,t){var i=this;return 0<e&&this.setStyle("visibility","visible"),new Fx.Tween(this,{duration:700}).start("opacity",e).chain(function(){if(t)return i.destroy();0==e&&i.setStyle("visibility","hidden")}),this},toggleDelayed:function(e,t,i,s){return this.fade(e),this.fadeDelayed(t,i,s)},setValue:function(e){return"button"==this.get("tag")?this.set("html",e):this.setProperty("value",e)},removeStyle:function(e){var t=new RegExp("[~;\\s]"+e+".*?[;~]","i");style=this.get("style")+";",this.set("style",style.replace(t,""))},removeClasses:function(e){for(var e=e.split(" "),t=0;t<e.length;t++)this.removeClass(e[t].trim());return this},advEvents:function(e){var i=this;return Object.each(e,function(e,t){i.addEventListener(t,e,!1)}),this},getElWithID:function(e){for(var t=this.getElements(e),i={},s=0;s<Object.getLength(t);s++)t[s]&&"element"==typeOf(t[s])&&(i[t[s].getProperty("id")]=t[s]);return i},getDataProps:function(){for(var e=this.attributes,t=new RegExp(/^data\-/),i={},s=0;s<e.length;s++)e[s].name.test(t)&&(i[e[s].name.replace(t,"")]=e[s].value);return i},isInViewport:function(){var e=this.getBoundingClientRect();return 0<=e.top&&0<=e.left&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)}});let popGallery=new Class({Implements:[Options],options:{close:!0,classes:null,escToHide:!0,clickToHide:!0,nav:!0,onMoveStart:function(){},onMoveEnd:function(){},onShow:function(){},onHide:function(){}},initialize:function(e){this.setOptions(e),this.on=this.el=!1,this.options.parent||(this.options.parent=document.getElement("body")),this.els=[],this.prepareCont()},prepareCont:function(){var t=this;this.c=new Element("div.popGalleryContainer").inject(document.body),this.options.classes&&this.options.classes.split(",").each(e=>this.c.addClass(e.trim())),this.hidden=document.getElement("body > div.popGalleryHidden > img")||new Element("img").inject(new Element("div.popGalleryHidden").inject(document.body)),this.options.escToHide&&document.body.addEvent("keyup",function(e){switch(e.key){case"esc":t.hide();break;case"left":t.nav.left.fireEvent("click");break;case"right":t.nav.right.fireEvent("click")}}),this.options.clickToHide&&this.c.addEvent("click",function(e){e.target==t.c&&t.hide()}),this.options.close&&new Element("div.close").set("html",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><title>Close</title><use xlink:href="#svgClose"></use></svg>').addEvent("click",function(){t.hide()}).inject(this.c),this.options.nav&&(this.nav={left:new Element('div.nav.left[html="&lsaquo;"]').inject(this.c),right:new Element('div.nav.right[html="&rsaquo;"]').inject(this.c)},this.nav.left.addEvent("click",this.prev.bind(this)),this.nav.right.addEvent("click",this.next.bind(this)))},addEl:function(t){var i=this;t.addEvent("click",function(e){e.stop(),i.show(t)}),this.els.push(t)},addEls:function(e){var t=this;e.each(function(e){t.addEl(e)})},show:function(e){var t,i,s=this.c.getElement("img.on"),o=e.getProperty("href"),a=this;s&&s.removeClass("on"),this.c.hasClass("on")||this.c.addClass("on"),e.loaded?this.c.getElement('img[src="'+o+'"]').addClass("on"):(s=e.getElement("img"),t=new Element("div.img.loading"),(i=s.clone().inject(t).addClass("on")).setStyles({width:s.getSize().x,height:s.getSize().y}),t.inject(this.c),Asset.image(o,{onLoad:function(){e.loaded=!0,a.hidden.setProperty("src",o),(function(){t.removeClass("loading"),i.setProperty("src",o).setStyles({width:a.hidden.naturalWidth,height:a.hidden.naturalHeight}),a.options.onShow()}).delay(300)}})),this.current=e},hide:function(){var e=this.c.getElement("img.on");e&&e.removeClass("on"),this.c.hasClass("on")&&this.c.removeClass("on"),this.current=null,this.options.onHide()},next:function(){var e=0,e=((e=this.current?this.els.indexOf(this.current):e)==this.els.length-1&&(e=-1),this.els[e+1]);this.show(e)},prev:function(){var e=this.els.length,e=(0==(e=this.current?this.els.indexOf(this.current):e)&&(e=this.els.length),this.els[e-1]);this.show(e)}});var errorHandler=new Class({initialize:function(e){},setFloatErrors:function(e=!0){this.floatErrors=e},addErr:function(e,t,i){var s,o,a=typeOf(e);return null!=e&&e&&""!=e&&(e="string"==a?$(e)||this.p.getElement("[name^="+e+"]"):e)?(a=i||e.getParent()||this.p,s=e.getCoordinates(),e.getProperty("type"),e.addClass("errorBorder"),o=(a=new Element("div.errorBox").setStyles({position:this.floatErrors?"absolute":"static","z-index":20,opacity:0}).set("tween",{duration:200}).set("html","<div>"+t+"</div>").inject(a)).getSize(),(o={left:s.left+s.width-o.x,top:s.top}).top<0&&(o.top=s.top+s.height,a.addClass("top")),o={left:s.left,top:s.top+s.height},a.addClass("below"),a.addEvent("click",function(){this.fadeDelayed(0,0,!0)}),a.tween("opacity",1),a):this.setGenericErr(t)},addErrs:function(e,i){var s,o=this;return Object.each(e,function(e,t){s=o.addErr(t,e,i)}),s},setParent:function(e){this.p=e},setGenericErr:function(e){var t=$("errorGeneric");return(t=t||new Element("div#errorGeneric.msg.error.icon").inject(this.p||document.getElement("body"),"top")).set("html",e),t},closeErrs:function(){var e=document.getElements("div.errorBox"),t=$("errorGeneric");document.getElements(".errorBorder").removeClass("errorBorder"),0<e.length&&e.destroy(),t&&t.destroy()}});let parseToLocalTimeString=function(e,t,i,s,o=innerData.def.lang.code){"string"==typeof e&&(e=new Date(e)),t=t||"dmyhiT",s=s||!0;var a,n={};for(let l=0;l<t.length;l++)switch(t[l]){case"D":n.day="numeric";break;case"d":n.day="2-digit";break;case"M":n.month="2-digit";break;case"m":n.month="long";break;case"n":n.month="short";break;case"y":n.year="numeric";break;case"Y":n.year="2-digit";break;case"h":n.hour="2-digit";break;case"i":n.minute="2-digit";break;case"s":n.second="2-digit";break;case"T":n.timeZoneName="short"}i?n.timeZone=i:Intl.DateTimeFormat().resolvedOptions().timeZone&&(n.timeZone=Intl.DateTimeFormat().resolvedOptions().timeZone),a=Intl.DateTimeFormat(void 0,n).formatToParts(e);let r=!1;if(n.month&&"2-digit"!=n.month&&s&&"en"!=(new Intl.DateTimeFormat).resolvedOptions().locale.replace(/(\-\w{2,})/,"")){switch(o){case"jp":o="ja";break;case"cn":o="zh"}r=e.toLocaleString(o,{month:n.month})}return a.map(e=>r&&"month"===e.type?r:e.value).join("")},parseToLocalTime=function(t){let e=new Date(t.getProperty("data-time")||t.getProperty("datetime")),i=t.getProperty("data-time-format")||"dmyhiT",s=t.getProperty("data-time-tz"),o=!0,a=innerData.def.lang.code,n;t.getProperty("data-time-month")&&"local"!=t.getProperty("data-time-month")&&(o=!1),t.getProperty("data-time-month-lang")&&Object.values(innerData.def.lang.accept).find(e=>e.code==t.getProperty("data-time-month-lang"))&&(a=t.getProperty("data-time-month-lang")),n=parseToLocalTimeString(e,i,s,o,a),t.set("html",n)};var insertAsyncStuff=function(){new Element('script[async="async"][src="https://www.youtube.com/iframe_api"]').inject(document.getElement("head > script"),"before")};class MoviePopup{constructor(){}show(e,t){this.popup||(this.popup=new popUp({type:"form",op:1,addClasses:".movie",close:"inner",onHide:()=>{this.popup.setInner("")}})),this.popup.setInner(`<iframe src="${e}" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"></iframe>`),this.popup.show()}}let moviePopup=new MoviePopup;class ErrorPopup{constructor(){}showError(e){this.popErrMsg||(this.popErrMsg=new popUp({type:"confirm",op:.8,addClasses:".popModern.err",close:"inner"})),this.popErrMsg.setInner(this.popModernTmpl().replace("{text}",e)),this.popErrMsg.show()}popModernTmpl(e){var t=Object.merge({back:!0,confirm:!1},e),i=(i="")+'<div class="text">{text}</div>'+'<div class="btns">';return t.back&&(i+='<button name="cancel" class="wide fz14 upper moviemask">'+innerData.def.back+"</button>"),t.confirm&&(i+='<button name="ok" class="upper gold goldborder wide fz14 moviemask">'+innerData.def.confirm+"</button>"),i+="</div>"}}let errorPopup=new ErrorPopup;class Region{constructor(e,t){this.prepareRegionEls(e),this.setSelector(t),this.selector&&this.selector[0]&&this.prepareEvents()}prepareRegionEls(e){"string"==typeof e&&(e=$(e)),this.container=e,this.container&&(this.regionList=this.container.getElement("ul"),this.regionSearch=this.container.getElement('input[type="search"]'))}setSelector(e){"string"==typeof e&&(e=$$("."+e)),this.selector=e,this.selector[0]&&(this.currentRegion=this.selector[0].getProperty("data-code"))}prepareEvents(){this.regionChanged=new CustomEvent("regionChanged",{detail:this.currentRegion}),Element.NativeEvents.regionChanged=2,this.regionList.addEvent("click:relay(li)",e=>{var t=e.target.getProperty("data-code"),i=e.target.get("text");this.currentRegion=t,this.selector.setProperty("data-code",t).set("text",i),this.container.removeClass("on"),this.regionList.getElement(".on").removeClass("on"),e.target.addClass("on"),(this.regionList.getParent("article")||document.body).setProperty("data-region",t),document.dispatchEvent(this.regionChanged)}),this.selector.addEvent("click",e=>{this.container.hasClass("on")?this.container.removeClass("on"):this.container.addClass("on")}),this.regionSearch.addEvent("input",e=>{var t,i=this.regionSearch.getProperty("value");if(e.event.data&&!e.event.data.test(/^[a-z]$/i))t=this.regionSearch.selectionStart-1,t=i.substr(0,t)+i.substr(1+t),this.regionSearch.setProperty("value",t);else{let t=new RegExp(i,"i");this.regionList.getElements("li").each(e=>{e.get("text").test(t)?e.removeClass("hide"):e.addClass("hide")})}})}get(){return this.currentRegion}}class BuyNow{constructor(e,t,i,s=!1){this.shops=[],this.fancy=s,this.addShops(e),this.setEditions(i),this.setRegion(t),(1<("/"==window.location.pathname[0]?window.location.pathname.substr(1):window.location.pathname).split("/").length||window.location.search.test(/fs=1/))&&this.scrollIfNeeded.delay(500,this)}addShops(e){this.fancy&&e.addEvent("transitionend",e=>{if(e.target.hasClass("hiding")){if(e.target.removeClass("hiding"),e.target.removeClass("on"),e.target.removeClass("off"),this.toHide.splice(this.toHide.indexOf(e.target),1),0<this.toShow.length){let e=this.toShow.pop();e.addClass("on"),(()=>e.removeClass("off")).delay(50)}this.checkFancyShow()}});let t=this;e.getElement("a").addEvent("click",function(e){window.dataLayer.push({event:"store_link_click",chosen_edition:t.currentEdition.getProperty("data-fullpage"),chosen_store:this.getParent("li").getProperty("data-platform"),chosen_region:t.region.get()})}),this.shops=this.shops.concat(Array.from(e))}setEditions(e){this.editions=e,this.currentEdition=Array.from(this.editions).find(e=>e.hasClass("on"));let i=this;this.editions.getElement("> a").addEvent("click",function(e){e.stop();var t=this.getParent("li");t.hasClass("on")?i.scrollIfNeeded():(i.currentEdition.removeClass("on"),i.currentEdition=t.addClass("on"),i.setDisabledRegion(),i.showShops(),i.changeBG(),history.replaceState(null,"","/"+window.location.pathname.replace(/^\/([^\/]+).*/,"$1")+"/"+t.getProperty("data-fullpage")),window.dataLayer.push({event:"store_window_click",action:"game_edition",choice:i.currentEdition.getProperty("data-fullpage")}))})}setRegion(e){this.region=e,document.addEvent("regionChanged",e=>{this.setDisabledRegion(),this.showShops()})}showShops(){if(this.fancy)return this.showShopsFancy();let i=this.region.get(),s=this.currentEdition.getProperty("data-fullpage");this.shops.each(e=>{var t=e.getProperty("data-region");this.disabledRegion||e.getProperty("data-fullpage")!=s||t&&t!=i?e.removeClass("on"):e.addClass("on")}),this.scrollIfNeeded()}showShopsFancy(){let i=this.region.get(),s=this.currentEdition.getProperty("data-fullpage");this.toShow=this.shops.filter(e=>{var t=e.getProperty("data-region");if(!(this.disabledRegion||e.getProperty("data-fullpage")!=s||t&&t!=i))return e}),this.toHide=this.shops.filter(e=>{var t=e.getProperty("data-region");if(e.hasClass("on")&&(e.getProperty("data-fullpage")!=s||t&&t!=i))return e}),this.toShow.each(e=>e.addClass("off")),this.toHide.each((e,t)=>(()=>{e.addClass("hiding").addClass("off")}).delay(50*t)),this.scrollIfNeeded()}checkFancyShow(){0==this.toHide.length&&0!=this.toShow.length&&this.toShow.each(e=>e.addClass("on").removeClass("off"))}scrollIfNeeded(){var e=this.shops.find(e=>e.hasClass("on"));e?e.isInViewport()||new Fx.Scroll(window,{duration:800,transition:"quint:in:out"}).toElementCenter(e,"y"):this.shops[0]&&new Fx.Scroll(window,{duration:800,transition:"quint:in:out"}).toElementCenter(this.shops[0].getParent("section")||this.shops[0].getParent("article"),"y")}changeBG(){this.editionbg||(this.editionbg=document.getElement(".editionbg img"),this.editionbg.addEvent("transitionend",e=>{if(this.editionbg.hasClass("off")){let e="/img/buy/shops_bg_"+this.currentEdition.getProperty("data-id")+".png";Asset.image(e,{onLoad:()=>{this.editionbg.setProperty("src",e),this.editionbg.removeClass("off")},onError:()=>this.editionbg.removeClass("off"),onAbort:()=>this.editionbg.removeClass("off")})}})),this.editionbg.addClass("off")}setDisabledRegion(){this.disabledRegion="de"==this.region.get()&&"dying-light-definitive-edition"==this.currentEdition.getProperty("data-fullpage"),(this.currentEdition.getParent("article")||document.body).setProperty("data-disabled",this.disabledRegion)}}function scrollToEl(e,t){if(e){null==t&&(t=50);var i=new Fx.Scroll(window,{duration:800,transition:"quint:in:out"});switch(e.getProperty("data-target")){case"top":default:i.start(0,e.getPosition().y-document.body.getElement("> nav").getSize().y-t);break;case"middle":i.start(0,window.getSize().y/2)}}}class ActiveContentSwitcher{constructor(e,t,i=[],s="active"){this.$indiscatorsRoot=e,this.$indicators=t,this.$targetsArray=i,this.activeClass=s,this.active=this.$indiscatorsRoot.dataset.activeIndicator||0,this.$indiscatorsRoot.addEventListener("click",t=>{var e=[...this.$indicators].find(e=>e===t.target||e.contains(t.target));e&&this.setActive([...this.$indicators].indexOf(e))}),this.setActive(this.active)}setActive(t){this.$indicators.forEach(e=>e.classList.remove(this.activeClass)),[...this.$indicators][t].classList.add(this.activeClass),this.$targetsArray.forEach(e=>{e.forEach(e=>e.classList.remove(this.activeClass)),e[t].classList.add(this.activeClass)}),this.active=t,this.$indiscatorsRoot.dataset.activeIndicator=t}}class StandardSwiperNav{constructor(e){this.$root=e,this.$root.dataset.swiper?(this.activeTab=this.$root.dataset.activeTab||0,this.spaceBetween=this.$root.dataset.spaceBetween||48,this.autoHeight="true"===this.$root.dataset.autoHeight,this.allowTouchMove="false"!==this.$root.dataset.allowTouchMove,this.$targetSwiper=document.querySelector(this.$root.dataset.swiper),this.$targetSwiper?(this.$navSwiper=this.$root.querySelector(".swiper"),new Swiper(this.$navSwiper,{slidesPerView:"auto",freeMode:!0,spaceBetween:this.spaceBetween,initialSlide:this.activeTab}),new Swiper(this.$targetSwiper,{slidesPerView:1,initialSlide:this.activeTab,autoHeight:this.autoHeight,allowTouchMove:this.allowTouchMove,navigation:{nextEl:this.$root.querySelector(".standard-swiper-nav__button--next"),prevEl:this.$root.querySelector(".standard-swiper-nav__button--prev")},thumbs:{swiper:this.$navSwiper.swiper}}),this.$targetSwiper.swiper.on("activeIndexChange",()=>{this.$navSwiper.swiper.slideTo(this.$targetSwiper.swiper.activeIndex),this.activeTab=this.$targetSwiper.swiper.activeIndex,this.$root.dataset.activeTab=this.$targetSwiper.swiper.activeIndex})):console.error("Target swiper no found")):console.error("You nedd to pass selector to target swiper")}}class ItemSetViewer{constructor(e){this.$root=e,this.rowsCount=parseInt(e.dataset.rowsCount),this.activeRow=parseInt(e.dataset.activeRow),this.$root.addEventListener("mouseenter",e=>{var i=e.target.closest("[data-item]");let t=e.target.closest(".item-icon[data-set]");if(i){let t=i.dataset.item;this.$root.querySelectorAll("[data-item]").forEach(e=>{e.dataset.item===t?e.classList.add("active"):e.classList.add("inactive")})}else t&&this.$root.querySelectorAll("path").forEach(e=>{t.classList.add("active"),e.hasAttribute("data-set")?e.classList.add("active"):e.classList.add("inactive")})},!0),this.$root.addEventListener("mouseleave",e=>{var t=e.target.hasAttribute("data-item")&&e.target,i=e.target.hasAttribute("data-set")&&e.target;(t||i)&&(i&&i.classList.remove("active"),this.$root.querySelectorAll("[data-item]").forEach(e=>{e.classList.remove("active"),e.classList.remove("inactive")}))},!0),this.$root.querySelector(".item-set-viewer__table").addEventListener("touchend",e=>{var i=e.target.closest("[data-item]");let s=e.target.closest(".item-icon[data-set]");if(i){let t=i.dataset.item;i=i.classList.contains("active");this.$root.querySelectorAll(".item-icon[data-set]").forEach(e=>{e.classList.remove("active")}),i?this.$root.querySelectorAll("[data-item]").forEach(e=>{e.classList.remove("active"),e.classList.remove("inactive")}):this.$root.querySelectorAll("[data-item]").forEach(e=>{e.classList.remove("active"),e.classList.remove("inactive"),e.dataset.item===t?e.classList.add("active"):e.classList.add("inactive")})}else if(s){let t=s.classList.contains("active");this.$root.querySelectorAll("[data-item]").forEach(e=>{e.classList.remove("active")}),this.$root.querySelectorAll("path").forEach(e=>{e.classList.remove("active"),e.classList.remove("inactive"),t?s.classList.remove("active"):(s.classList.add("active"),e.hasAttribute("data-set")?e.classList.add("active"):e.classList.add("inactive"))})}}),this.$root.querySelector(".item-set-viewer__model").addEventListener("touchend",e=>{var t=e.target.closest("[data-item]"),i=t&&t.dataset.row,s=t&&t.dataset.item;t&&(t.classList.contains("active")?this.$root.querySelectorAll("[data-item], [data-set]").forEach(e=>{e.classList.remove("active"),e.classList.remove("inactive")}):(this.$root.querySelectorAll("[data-item], [data-set]").forEach(e=>{e.classList.remove("active"),e.classList.remove("inactive")}),this.$root.querySelectorAll("[data-item]").forEach(e=>e.classList.add("inactive")),this.$root.querySelectorAll(`[data-item="${s}"]`).forEach(e=>{e.classList.add("active"),e.classList.remove("inactive")}),this.activeRow=i,this.$root.dataset.activeRow=this.activeRow))}),this.$root.querySelector(".item-set__nav-button--prev").addEventListener("pointerdown",()=>{this.activeRow--,this.activeRow=this.activeRow<0?this.rowsCount-1:this.activeRow,this.$root.dataset.activeRow=this.activeRow}),this.$root.querySelector(".item-set__nav-button--next").addEventListener("pointerdown",()=>{this.activeRow++,this.activeRow=this.activeRow>=this.rowsCount?0:this.activeRow,this.$root.dataset.activeRow=this.activeRow})}}window.addEvent("domready",function(){main.body=document.getElement("body"),main.nav=main.body.getElement("> nav"),setErr=new errorHandler,"firefox"==Browser.name&&Browser.version<102&&main.body.addClass("nobackdrop");var e=$$(".page-header__image-character img"),e=(e&&e[0]&&e[0].addEvent("load",function(e){this.loaded=!0,$$(".page-header__image")[0].addClass("visible")}),main.body.hasClass("safari")&&$$('video[loop] source[type="video/webm"]').each(e=>{e.destroy()}),main.body.addEvent('submit:relay(form[action="ajax"])',function(e){e&&e.stop&&e.stop();var a,n,r,t,i,l=this.getParent("section.rotator");l&&l.addClass("loading"),this.hasClass("doubleSubmit")||((n=(a=this).getElement("button[type=submit]"))&&(r=n.get("html")),a.getElement('input[name="js"]')||new Element('input[type="hidden"][name="js"][value="1"]').inject(a),a.getElement('input[name="rtype"]')||new Element('input[type="hidden"][name="rtype"][value="text"]').inject(a),t=new URLSearchParams(window.location.search),i={},t.forEach((e,t)=>{["channel","content"].includes(t)&&(i[t]=e)}),a.getElement('input[name="attributes"]')||new Element('input[type="hidden"][name="attributes"][value='+JSON.stringify(i)+"]").inject(a),setErr.setParent(a.hasClass("parentErr")?a.getParent():a),setErr.setFloatErrors(a.hasClass("floatErrors")),a.set("send",{onRequest:function(){n&&n.setValue(innerData.loading).setAttribute("disabled","disabled"),setErr.closeErrs()},onSuccess:function(s){if(a.hasClass("spinner")&&a.removeClass("spinner"),!s||"{"!=s[0])return n&&n.setValue(r).removeAttribute("disabled"),setErr.addErr("0",innerData.def.noout);try{if(!(s=JSON.parse(s)))return n&&n.setValue(r).removeAttribute("disabled"),setErr.addErr("0",innerData.def.noout)}catch(e){return"reload"!==s.action?setErr.addErr("0",innerData.def.noout):void(window.location.pathname.test("/ops/")?window.location.href="/":window.location.reload())}if(s.ok){switch(s.gtm&&"login"===s.gtm.ev&&window.dataLayer.push({event:"login"}),s.action){case"newsletter":let e=a.closest(".wrapper"),t=(e.classList.add("newsletter__thanks"),e.innerHTML=s.msg,window.dataLayer.push({event:"newsletter_subscribed"}),document.querySelector(".newsletter-page"));t&&setTimeout(()=>{t.classList.add("show"),e.classList.add("show")},200);break;case"msg":n&&n.setValue(r).removeAttribute("disabled"),(o=new Element("p.ok.icon.msg[html="+s.msg+"]").inject(a,"top")).fadeDelayed(0,12e3,!0),0<window.getScroll().y-o.getPosition().y&&new Fx.Scroll(window,{duration:1200,transition:"quint:in:out"}).toElement(o,"y"),s.reload&&!(function(){window.location.reload()}).delay(2e3);break;case"cmsg":n&&n.setValue(r).removeAttribute("disabled");let i={icon:!0,type:"ok",fade:12e3,scroll:!0,reload:!1,modern:!0};s.config&&(i=Object.merge(i,s.config)),-1==["ok","warn","error","info","help"].indexOf(i.type)&&(i.type="info");var o=new Element("p.msg."+i.type+(i.modern?".modern":"")+"[html="+s.msg+"]");i.icon&&o.addClass("icon"),o.inject(a,"top"),i.fade&&o.fadeDelayed(0,i.fade,!0),i.scroll&&0<window.getScroll().y-o.getPosition().y&&new Fx.Scroll(window,{duration:1200,transition:"quint:in:out"}).toElement(o,"y"),i.reload&&!(function(){window.location.reload()}).delay(2e3);break;case"fwd":window.location.href=s.url;break;case"test":n&&n.setValue(r).removeAttribute("disabled");break;default:window.location.pathname.test("/ops/")?window.location.href="/":window.location.reload()}s.nr||a.reset()}else{if(!s.err){if(n&&n.setValue(r).removeAttribute("disabled"),l&&l.removeClass("loading"),s.console)for(e=0;e<s.console.length;e++)s.console[e].msg&&console.error(s.console[e].msg),s.console[e].trace&&console.table(JSON.parse(s.console[e].trace));return setErr.addErr("0",innerData.def.noout,"redeemForm"==a.getProperty("id")?a:null)}o=setErr.addErrs(s.err,"redeemForm"==a.getProperty("id")?a:null);if(0<window.getScroll().y-o.getPosition().y&&new Fx.Scroll(window,{duration:1200,transition:"quint:in:out"}).toElement(o,"y"),n&&n.setValue(r).removeAttribute("disabled"),s.console)for(var e=0;e<s.console.length;e++)s.console[e].msg&&console.error(s.console[e].msg),s.console[e].trace&&console.table(JSON.parse(s.console[e].trace))}l&&l.removeClass("loading")},onFailure:function(e){a.hasClass("spinner")&&a.removeClass("spinner"),n&&n.removeProperty("disabled").setValue(r),l&&l.removeClass("loading")},onCancel:function(e){a.hasClass("spinner")&&a.removeClass("spinner"),n&&n.removeProperty("disabled").setValue(r),l&&l.removeClass("loading")},onException:function(e,t){a.hasClass("spinner")&&a.removeClass("spinner"),n&&n.removeProperty("disabled").setValue(r),l&&l.removeClass("loading")}}).addClass("doubleSubmit")),this.send()}),$$(".toFade"));e&&0<Object.getLength(e)&&e.fadeDelayed(0,5e3,!0);let i=[];e=$$(".animObserver");e&&0<Object.getLength(e)&&e.each(function(e){var t=e.getProperty("data-observer-root")||"20px 0px 20px 0px";i[t]||(i[t]=new IntersectionObserver(function(e){e.each(function(e){var t=e.target,i=t.getParent();e.isIntersecting&&!i.hasClass("visible")?i.addClass("visible"):i.removeClass("visible"),e.isIntersecting&&!t.hasClass("visible")?t.addClass("visible"):t.removeClass("visible")})},{rootMargin:t})),i[t].observe(e)}),main.body.addEvent("click:relay(.copyText)",function(e){e.stop();var t,i,s=this.getProperty("data-copy-target"),o=this.getProperty("data-copy-text"),a=this.getParent(),s=o||(s?$(s):this.getPrevious());a.addClass("coping"),e=s,o=document,"string"!=typeof e&&"number"!=typeof e&&!["input","textarea","select"].contains(e.get("tag"))||((t=$("dummyTxt")||new Element("div#dummyTxt.hideMe").inject(main.body)).set("html",e.value||e),e=t),o.body.createTextRange?((i=o.body.createTextRange()).moveToElementText(e),i.select()):window.getSelection&&(t=window.getSelection(),(i=o.createRange()).selectNodeContents(e),t.removeAllRanges(),t.addRange(i)),document.execCommand("copy"),window.getSelection?window.getSelection().removeAllRanges():document.selection&&document.selection.empty(),(function(){a.removeClass("coping")}).delay(1e3)});new Tips(".fancyTips",{hideEmpty:!0,title:function(e){return e.getProperty("data-tips-title")||e.getProperty("title")},text:function(e){let t=e.getProperty("data-tips-content").split(","),i="";i+="<ul>";for(var s of t)i+="<li>"+s+"</li>";return i+="</ul>"},className:"fancyToolTip",fixed:!0});$$(".fancyTips").addEvent("click",function(e){e.target.hasClass("showing")?e.target.fireEvent("mouseleave").removeClass("showing"):e.target.fireEvent("mouseenter").addClass("showing")});e=new Region("regionList","selectRegion");let t=new BuyNow(document.body.getElements(".shop"),e,document.body.getElements(".edition")),s=$("openDetails"),o=$$(".openDetailsList");s&&s.addEvent("click",function(){s.toggleClass("on"),o.toggleClass("on"),s.hasClass("on")&&window.dataLayer.push({event:"store_window_click",action:"editions_details",choice:t.currentEdition.getProperty("data-fullpage")})});var a,e=$$(".popYT[data-vid]"),e=(e&&0<e.length&&(a=new popUp({type:"form",op:1,addClasses:".movie",close:"inner",onHide:function(e){var t=e.getProperty("data-name");t&&YTPlayer[t]&&YTPlayer[t].pauseVideo()}}),e.each(function(e){e.addEvent("click",function(e){var t,i;e.stop(),a.isOpen()||(i=String.uniqueID(),t=this.getProperty("data-vid"),this.setProperty("data-name",i),a.setEl(this),a.setInner('<div class="video"></div>'),i={vid:t,autoplay:0,name:i},startYTMovie(a.getPop().inner.getElement("div.video"),i),a.show(),window.dataLayer.push({event:"cta_video_click",game:this.getProperty("data-gtm-game")||window.location.pathname.substr(1),button_location:this.getProperty("data-gtm-place"),video_title:this.getProperty("title")||"Not specified",video_id:t}))})})),$$(".inlineYT[data-vid]"));function n(n){var r=n.getProperty("data-vid");if(r){let e=n.getProperty("data-vid-autoplay"),t=n.getProperty("data-vid-resize"),i=n.getProperty("data-vid-poster"),s=n.getProperty("data-vid-mobile"),o=(e="0"!=e,t="0"!=t,new Element("video"+(e?"[autoplay]":"")+(i?'[poster="'+i+'"]':"")+'[playsinline][loop][muted][preload="auto"][loading="lazy"]')),a="";return s&&(a=(a+='<source src="'+r+s+'_av1.mp4" type="video/mp4" media="(max-width: 768px)" />')+'<source src="'+r+s+'_vp9.webm" type="video/webm" media="(max-width: 768px)" /><source src="'+r+s+'.mp4" type="video/mp4" media="(max-width: 768px)" />'),a=(a=(a+='<source src="'+r+"_av1"+(isMobile&&t?"_mobile":"")+'.mp4" type="video/mp4" />')+('<source src="'+r+"_vp9"+(isMobile&&t?"_mobile":"")+'.webm" type="video/webm" />'))+('<source src="'+r+(isMobile&&t?"_mobile":"")+'.mp4" type="video/mp4" />'),o.set("html",a),e&&(o.autoplay=!0),o.muted=!0,o.loop=!0,o.inject(n,n.getProperty("data-vid-inject")||"bottom"),o.addEventListener("canplay",function(){o.addClass("on")}),t&&window.addEvent("resize",function(e){o.getElements("source").each(function(e){var t=e.getProperty("src");isMobile&&!t.test("_mobile")?e.setProperty("src",t.replace(/\.(webm|mp4)/,"_mobile.$1")):!isMobile&&t.test("_mobile")&&e.setProperty("src",t.replace(/_mobile/,""))})}),o}}e&&0<e.length&&e.each(function(r){r.addEvent("click",function(e){e&&e.stop&&e.stop();var t,i=this.getProperty("data-name")||String.uniqueID(),s=this.getParent("li")||this.getParent()||this.getParent(".item"),o=s.getElement("figure")||this,a=o.getElement("div.video")||new Element("div.video").inject(o),n=(o.getElement(".playbtn"),r.hasClass("waveform")?$$("#bgWaveVideo video")[0]:null);s.addClass("playing"),this.getProperty("data-name")?(YTPlayer[i].playVideo(),n&&n.play()):(o.addClass("spinner"),s.getElements("[data-vid]").setProperty("data-name",i),t={vid:this.getProperty("data-vid"),autoplay:1,name:i,events:{onReady:function(){o.removeClass("spinner"),YTPlayer[i].playVideo(),n&&(n.getParent().addClass("on"),n.play())},onStateChange:function(e){switch(e.data){case YT.PlayerState.PAUSED:case YT.PlayerState.ENDED:s.removeClass("playing"),n&&n.pause()}}}},e&&e.init&&(t.mute=!0),startYTMovie(a,t))})});e=$$(".bgMovie"),e&&0<Object.getLength(e)&&e.each(n),e=document.querySelectorAll('a[href*="bilibili"][data-vid]');e.length&&e.forEach(t=>{t.addEventListener("click",e=>{e.preventDefault(),moviePopup.show(t.dataset.vid)})}),new popUp({type:"confirm",op:.8,addClasses:".popModern.err",close:"inner",onHide:function(e,t,i){}});$$(".msg.ok:not(.dontfade)").each(function(e){e.fadeDelayed(0,5e3,!0)}),main.body.addEvent("click:relay(a[href*=#])",function(e){if(!this.getParent("#CybotCookiebotDialog")&&(e.stop(),!this.hasClass("leaflet-popup-close-button"))){var t=new URL(this),i=t.protocol+"//"+t.host+t.pathname+t.search+t.hash,s=$(t.hash.substr(1)),o=this.getProperty("target");if(s)if(s.hasClass("hideMe")||"none"==s.getStyle("display"))window.location.href="/#"+t.hash.substr(1);else{Modernizr.history&&history.pushState({id:i},null,i),new Fx.Scroll(window,{duration:800,transition:"quint:in:out"}).start(0,s.getPosition().y-main.nav.getSize().y);try{_gaq.push(["_trackPageview",i])}catch(e){}}else o&&"_blank"==o?window.open(i):window.location.href=i}}),$$("img[loading]").each(function(t){t.addClass("notloaded"),t.complete?t.removeClass("notloaded"):t.addEvent("load",function(e){t.removeClass("notloaded")})});$$(".odometer:not(.dl2countdown)");var r,l=$$(".changeLangBtn");l&&0<Object.getLength(l)&&(r=null,"firefox"==Browser.name&&l.addClass("firefox"),l.addEvents({click:function(e){e.target.hasClass("current")&&e.stop(),this.hasClass("on")?this.removeClass("on"):(e.stop(),this.addClass("on"))},mouseleave:function(){var e=this;r=(function(){e.removeClass("on"),r=null}).delay(500)},mouseenter:function(){r&&clearTimeout(r)}}),window.addEvent("click",function(e){r&&(clearTimeout(r),l.removeClass("on"),r=null)})),$$(".faqlist").each(function(e){e.addEvent("click:relay(li > .name,li > .opener)",function(){this.getParent("li").toggleClass("on")})});let d=document.querySelector(".page-nav");if(d){d.querySelectorAll(".page-nav__list-item--with-sublist").forEach(e=>{e.addEventListener("click",()=>{e.classList.toggle("page-nav__list-item--with-sublist-open")})}),window.addEventListener("scroll",e=>{10<window.scrollY?d.classList.add("page-nav--scroll"):d.classList.remove("page-nav--scroll")});let t=d.querySelector(".page-nav__mobile-button");t.addEventListener("click",e=>{t.classList.contains("page-nav__mobile-button--active")?(t.classList.remove("page-nav__mobile-button--active"),d.classList.remove("page-nav--show-mobile-menu")):(t.classList.add("page-nav__mobile-button--active"),d.classList.add("page-nav--show-mobile-menu"))}),d.querySelectorAll(".page-nav__list-item--hide-mobile-menu").forEach(e=>{e.addEventListener("click",()=>{t.classList.remove("page-nav__mobile-button--active"),d.classList.remove("page-nav--show-mobile-menu")})})}e=document.querySelector(".home-header__swiper"),e&&new Swiper(e,{speed:1e3,slidesPerView:1,effect:"coverflow",coverflowEffect:{slideShadows:!1},pagination:{el:".home-header__swiper .swiper-pagination",type:"bullets",clickable:!0}}),e=document.querySelector(".page-header__screenshots"),e&&(e=e.querySelector(".swiper"),new Swiper(e,{loop:!0,slidesPerView:2,spaceBetween:5,breakpoints:{1600:{slidesPerView:3}},navigation:{nextEl:".page-header__screenshots .swiper-button-next",prevEl:".page-header__screenshots .swiper-button-prev"}}),e=$$(".page-header__screenshots a"),(new popGallery).addEls(e)),e=document.querySelector(".pillars");if(e){var c=e.querySelector(".swiper"),h=e.querySelector(".pillars__steps");let s=e.querySelectorAll(".pillars__step"),o=new Swiper(c,{speed:1e3,slidesPerView:1,effect:"fade",fadeEffect:{crossFade:!0},autoplay:{delay:5e3,disableOnInteraction:!0,pauseOnMouseEnter:!0},pagination:{el:".pillars .swiper-pagination",type:"bullets",clickable:!0},on:{realIndexChange:function(e){s.forEach(e=>e.classList.remove("pillars__step--active")),[...s][e.realIndex].classList.add("pillars__step--active")}}});h.addEventListener("click",e=>{var t,i=e.target.closest(".pillars__step-title");i&&(i=i.closest(".pillars__step"),t=[...s].indexOf(i),i.classList.contains("pillars__step--active")||o.slideTo(t))});e=document.querySelectorAll(".pillars__body .swiper-slide__paralax");e.length&&e.forEach(e=>{new Parallax(e,{relativeInput:!1})})}c=document.querySelector(".dlc");if(c){h=c.querySelector(".swiper"),e=c.querySelector(".dlc__steps");let s=c.querySelectorAll(".dlc__step"),o=new Swiper(h,{speed:1e3,slidesPerView:1,effect:"fade",fadeEffect:{crossFade:!0},pagination:{el:".dlc .swiper-pagination",type:"bullets",clickable:!0},on:{realIndexChange:function(e){s.forEach(e=>e.classList.remove("dlc__step--active")),[...s][e.realIndex].classList.add("dlc__step--active")}}});e.addEventListener("click",e=>{var t,i=e.target.closest(".dlc__step-title");i&&(i=i.closest(".dlc__step"),t=[...s].indexOf(i),i.classList.contains("dlc__step--active")||o.slideTo(t))})}let p=$("baronVidIntro");p&&new IntersectionObserver(function(e){e.each(function(e){e.isIntersecting&&!p.hasClass("played")?(p.addClass("played"),p.addEventListener("ended",()=>p.addClass("off")),(()=>p.play()).delay(250)):p.hasClass("played")&&!p.hasClass("off")&&p.addClass("off")})},{rootMargin:"-20% 0px -20% 0px"}).observe(p);c=$$(".swiper-media-coverflow");if(c){let i=window.matchMedia("(min-width: 768px)").matches?document.getSize().x/(document.getSize().x/100):null;c.each(e=>{var t={loop:!0,slidesPerView:"auto",initialSlide:1,centeredSlides:!0,slideToClickedSlide:!0,autoHeight:1==e.getProperty("data-mediacoverflow-autoh"),effect:"coverflow",coverflowEffect:{depth:0,modifier:1,rotate:0,scale:.7,slideShadows:!1,stretch:i},breakpoints:{768:{autoHeight:!1}},on:{realIndexChange:e=>{var t=e.slides[e.activeIndex].getElement("video")||n(e.slides[e.activeIndex].getElement(".pillarVideo")),i=e.slides[e.previousIndex].getElement("video");i&&i.pause(),t&&t.play()}}};e.getNext(".swiper-media-nav")&&(t.navigation={nextEl:e.getNext(".swiper-media-nav").getElement(".swiper-button-next"),prevEl:e.getNext(".swiper-media-nav").getElement(".swiper-button-prev")}),e.getNext(".swiper-media-pagination")&&(t.pagination={el:e.getNext(".swiper-media-pagination"),type:"bullets",clickable:!0,renderBullet:(e,t)=>'<span class="'+t+'"></span>'}),new Swiper(e,t)})}h=$$(".swiper-media-gallery");h&&h.each(e=>{new Swiper(e,{loop:!0,slidesPerView:1,navigation:{nextEl:e.getNext(".swiper-media-nav").getElement(".swiper-button-next"),prevEl:e.getNext(".swiper-media-nav").getElement(".swiper-button-prev")}})});let u=document.querySelector(".video-header__wishlist"),g=document.querySelector(".wishlist-bar");if(u&&g){let e=()=>{u.offsetTop-window.scrollY<200?(u.style.setProperty("--delay","0s"),g.style.setProperty("--delay","0.5s"),u.classList.remove("video-header__wishlist--visible"),u.classList.add("video-header__wishlist--hidden"),g.classList.add("wishlist-bar--visible")):(u.style.setProperty("--delay","0.5s"),g.style.setProperty("--delay","0s"),u.classList.remove("video-header__wishlist--hidden"),u.classList.add("video-header__wishlist--visible"),g.classList.remove("wishlist-bar--visible"))};e(),window.addEventListener("scroll",()=>{e()})}let m=document.querySelector(".video-header__wishlist-mobile");e=document.querySelector(".wishlist-mobile");if(m&&e){let e=()=>{var e=m.getBoundingClientRect().height;m.offsetTop+e-window.scrollY<=0?document.body.classList.add("mobile-wishlist-fixed"):document.body.classList.remove("mobile-wishlist-fixed")};e(),window.addEventListener("scroll",()=>{e()})}c=document.querySelectorAll(".wisthlist-button"),h=document.querySelector(".wishlist-popup-content");if(c.length&&h){let t=new popUp({close:"inner",addClasses:".wishlistPopup",clickToHide:!0});t.setInner(h),c.forEach(e=>{e.addEventListener("click",()=>{t.show()})})}e=document.querySelectorAll(".lazybg");if(e.length){let t=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(e.target.classList.remove("lazybg"),t.unobserve(e.target))})},{rootMargin:"500px 0px 500px 0px"});e.forEach(e=>t.observe(e))}document.querySelectorAll(".standard-swiper-nav").forEach(e=>{new StandardSwiperNav(e)}),document.querySelectorAll(".bundle").forEach(e=>{new ActiveContentSwitcher(e,e.querySelectorAll(".bundle__icons li"),[e.querySelectorAll(".bundle__items li")])});document.querySelectorAll(".item-set-viewer").forEach(e=>{new ItemSetViewer(e)});h=document.querySelector(".single-news"),h&&document.querySelectorAll(".single-news a").forEach(e=>{e.addEventListener("mouseenter",e=>{e.target.closest(".single-news").classList.add("single-news--hover")}),e.addEventListener("mouseleave",e=>{e.target.closest(".single-news").classList.remove("single-news--hover")})}),c=document.querySelector(".news-index__filter-show-all"),c&&c.addEventListener("click",e=>{var t=e.target.closest(".news-index__filters");t.classList.contains("news-index__filters--all")?t.classList.remove("news-index__filters--all"):t.classList.add("news-index__filters--all"),e.target.closest(".news-index__filters__swiper").swiper.update()}),e=document.querySelectorAll(".news-index__filters__swiper"),e.length&&e.forEach(e=>{new Swiper(e,{slidesPerView:"auto",freeMode:!0,spaceBetween:12})}),h=document.querySelector(".news-index__search-icon");let v=document.querySelector(".news-index__search-form");if(h&&v){let e=v.getElement("input");let t=new URLSearchParams(document.location.search).get("search")??"";0<t.length&&e.addClass("noRetract"),h.addEventListener("click",()=>{0==e.value.length&&0<t.length||3<e.value.length&&e.value!=t?v.submit():e.focus()}),e.addEventListener("search",()=>{(0==e.value.length&&0<t.length||3<e.value.length&&e.value!=t)&&v.submit()})}c=$("closePromoBar");c&&c.addEvent("click",function(e){e.stop;let t=Cookie.read("promoBar"),i=this.getProperty("data-id");this.getParent().destroy(),main.body.removeClass("promobar"),(t=t?JSON.parse(t):{})[i]=!0,Cookie.write("promoBar",JSON.stringify(t),{domain:"."+window.location.host,duration:365,secure:1})});let y=document.querySelector("article.newsletter-page");if(y&&y.hasClass("newsletter-success")){let e=y.querySelector(".newsletter.subscribe .wrapper");e.classList.add("newsletter__thanks"),e.innerHTML='<div class="name">'+innerData.def.done+"</div><p>"+y.querySelector("#subscribe-confirmation-text").value+"</p>",window.dataLayer.push({event:"newsletter_subscribed"}),setTimeout(()=>{y.classList.add("show"),e.classList.add("show")},200)}e=$$(".quotesRotator");if(e)e.each(function(e){!(function(){var e=this.getElements("> div"),t=this.getElement("> div.on");let i;t?(i=t.getNext()||e[0],t.removeClass("on")):i=e[0],i.addClass("on")}).periodical(5e3,e)});setTimeout(insertAsyncStuff,0)}),window.addEvent("load",function(){document.body.removeClass("loading").addClass("loaded");var e=$$(".videoDelayed");let t,s=new ResizeObserver(e=>{e.each(e=>{e.target.pause(),e.target.addClass("reloading"),t&&clearTimeout(t),t=setTimeout(()=>{e.target.load(),e.target.play()},40)})}),i;e.each(t=>{t.muted=!0,t.playsInline=!0,t.addEvent("canplay",e=>{t.addClass("on"),t.removeClass("reloading")});let i=t.getProperty("data-forcedloop");i&&(t.removeProperty("loop"),t.loop=!1,t.addEvent("ended",e=>{t.currentTime=i.toInt(),t.play()})),s.observe(t)}),""!=window.location.hash&&(i=new URL(window.location.href).hash,scrollToEl($(i)));e=$$(".localTime"),e&&e.each(parseToLocalTime),e=$$(".gtmBtns:not(.popYT)");e&&e.addEvent("click",function(e){e.stop();var t=this.getProperty("target"),i=this.getProperty("data-gtm-type"),s=this.getProperty("data-gtm-place"),o={event:null,game:this.getProperty("data-gtm-game")||window.location.pathname.substr(1),button_location:s};switch(""==o.game&&(o.game="home"),i){case"store":o.event="store_link_click",o.chosen_store=this.getProperty("data-gtm-store")||"Not specified";break;case"buy":o.event="cta_store_click";break;case"video":o.event="cta_video_click",o.video_title=this.getProperty("title")||"Not specified",o.video_id=this.getProperty("data-vid")||"Not specified"}o.event&&window.dataLayer.push(o),t?window.open(this.getProperty("href")):window.location.href=this.getProperty("href")});let o=$$(".page-header__image");o&&o[0]&&!o[0].hasClass("visible")&&(()=>o[0].addClass("visible")).delay(700)});